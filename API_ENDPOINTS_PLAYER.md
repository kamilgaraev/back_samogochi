# API Endpoints - –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –∏–≥—Ä–æ–∫–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ GDD.

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

### –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º

#### `GET /api/player/profile`
–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —É—Ä–æ–≤–Ω—è.

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω",
  "data": {
    "id": 1,
    "user_id": 1,
    "level": 3,
    "total_experience": 275,
    "experience_in_current_level": 75,
    "experience_to_next_level": 25,
    "level_progress_percentage": 75.0,
    "energy": 150,
    "max_energy": 200,
    "energy_percentage": 75.0,
    "stress": 45,
    "stress_status": "normal",
    "anxiety": 30,
    "consecutive_days": 5,
    "can_receive_daily_reward": true
  }
}
```

#### `PUT /api/player/profile`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏).

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `stress` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): integer, 0-100
- `anxiety` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): integer, 0-100

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "stress": 35,
  "anxiety": 25
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### `GET /api/player/stats`
–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "total_situations_completed": 12,
    "total_micro_actions_performed": 25,
    "today_situations": 2,
    "today_micro_actions": 5,
    "average_stress_week": 42.3,
    "current_streak": 5,
    "level_progress": {
      "current_level": 3,
      "experience_in_level": 75,
      "experience_to_next": 25,
      "progress_percentage": 75.0
    },
    "energy_percentage": 75.0,
    "stress_status": "normal"
  }
}
```

#### `GET /api/player/progress`
–ü—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä–æ–∫–∞ —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ –∏ –Ω–µ–¥–∞–≤–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "current_level": 3,
    "total_experience": 275,
    "experience_to_next_level": 25,
    "level_progress_percentage": 75.0,
    "achievements": [
      {
        "id": "first_situation",
        "title": "–ü–µ—Ä–≤—ã–π —à–∞–≥",
        "description": "–ü—Ä–æ—à–ª–∏ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–µ—Å—Å–æ–≤—É—é —Å–∏—Ç—É–∞—Ü–∏—é",
        "unlocked_at": "2024-01-15T10:30:00Z"
      }
    ],
    "recent_activity": [
      {
        "type": "situation_completed",
        "title": "–°—Ç—Ä–µ—Å—Å–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –Ω–∞ —Ä–∞–±–æ—Ç–µ",
        "timestamp": "2024-01-15T14:20:00Z",
        "experience_gained": 15
      }
    ]
  }
}
```

### –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

#### `POST /api/player/daily-reward`
–ü–æ–ª—É—á–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–∞–≥—Ä–∞–¥—ã (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞).

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞!",
  "data": {
    "experience_gained": 10,
    "bonus_experience": 5,
    "consecutive_days": 6
  }
}
```

#### `POST /api/player/add-experience`
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ –∏–≥—Ä–æ–∫—É (–¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `amount`: integer, 1-1000 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `reason`: string, –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è:**
```json
{
  "success": true,
  "message": "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è!",
  "level_up": true,
  "data": {
    "experience_added": 50,
    "old_level": 2,
    "new_level": 3
  }
}
```

#### `POST /api/player/update-energy`
–ò–∑–º–µ–Ω–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –∏–≥—Ä–æ–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `amount`: integer, -200 –¥–æ +200

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "amount": 15
}
```

#### `POST /api/player/update-stress`
–ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å—Ç—Ä–µ—Å—Å–∞ –∏–≥—Ä–æ–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `amount`: integer, -100 –¥–æ +100

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–£—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω",
  "data": {
    "old_stress": 50,
    "new_stress": 35,
    "change": -15,
    "stress_status": "normal"
  }
}
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

### Controllers (`PlayerController.php`)
- HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Services (`PlayerService.php`)
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
- –†–∞—Å—á–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### Repositories (`PlayerRepository.php`)
- –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (0-100 —Å—Ç—Ä–µ—Å—Å, 0-200 —ç–Ω–µ—Ä–≥–∏—è)
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –≤ `activity_logs`

## üìä –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

### –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π
- 1 —É—Ä–æ–≤–µ–Ω—å = 100 –æ–ø—ã—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –°–æ–±—ã—Ç–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è

### –°—Ç–∞—Ç—É—Å—ã —Å—Ç—Ä–µ—Å—Å–∞
- `low`: 0-20
- `normal`: 21-50  
- `elevated`: 51-80
- `high`: 81-100

### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –†–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä—ã curl –∑–∞–ø—Ä–æ—Å–æ–≤:

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
curl -X GET http://localhost:8000/api/player/profile \
  -H "Authorization: Bearer YOUR_TOKEN"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ—Å—Å–∞
curl -X POST http://localhost:8000/api/player/update-stress \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"amount": -10}'

# –ü–æ–ª—É—á–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–∞–≥—Ä–∞–¥—ã
curl -X POST http://localhost:8000/api/player/daily-reward \
  -H "Authorization: Bearer YOUR_TOKEN"
```

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ GDD –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TODO.
