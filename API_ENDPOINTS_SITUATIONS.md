# API Endpoints - –ò–≥—Ä–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π —Å–æ–≥–ª–∞—Å–Ω–æ GDD —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–π

#### `GET /api/situations`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `per_page` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): integer, 1-50, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- `category` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): string, work|study|personal|health

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–°–ø–∏—Å–æ–∫ —Å–∏—Ç—É–∞—Ü–∏–π —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω",
  "data": {
    "situations": [
      {
        "id": 1,
        "title": "–ì–æ—Ä—è—â–∏–π –¥–µ–¥–ª–∞–π–Ω –Ω–∞ —Ä–∞–±–æ—Ç–µ", 
        "description": "–í–∞—à —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å—Ä–æ—á–Ω–æ –∑–∞–∫–æ–Ω—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç...",
        "category": "work",
        "difficulty_level": 2,
        "stress_impact": 15,
        "experience_reward": 20,
        "options": [
          {
            "id": 1,
            "text": "–°–ø–æ–∫–æ–π–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π...",
            "stress_change": -5,
            "experience_reward": 25,
            "energy_cost": 10
          }
        ]
      }
    ],
    "pagination": {
      "current_page": 1,
      "total_pages": 3,
      "per_page": 15,
      "total": 8
    },
    "cooldown_info": {
      "on_cooldown": false,
      "cooldown_ends_at": null
    },
    "player_level": 2
  }
}
```

#### `GET /api/situations/{id}`
–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "situation": {
      "id": 1,
      "title": "–ì–æ—Ä—è—â–∏–π –¥–µ–¥–ª–∞–π–Ω –Ω–∞ —Ä–∞–±–æ—Ç–µ",
      "description": "...",
      "category": "work", 
      "difficulty_level": 2,
      "stress_impact": 15,
      "experience_reward": 20
    },
    "options": [
      {
        "id": 1,
        "text": "–°–ø–æ–∫–æ–π–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π...",
        "stress_change": -5,
        "experience_reward": 25,
        "energy_cost": 10,
        "min_level_required": 1
      }
    ],
    "player_info": {
      "current_stress": 45,
      "current_energy": 120,
      "level": 2
    },
    "can_start": true
  }
}
```

#### `GET /api/situations/random`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `category` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): string, work|study|personal|health

**–û—Ç–≤–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω GET /api/situations/{id}**

### –ò–≥—Ä–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

#### `POST /api/situations/{id}/complete`
–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ —Å –≤—ã–±–æ—Ä–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `option_id`: integer, ID –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—è

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "option_id": 1
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–°–∏—Ç—É–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!",
  "data": {
    "situation": "–ì–æ—Ä—è—â–∏–π –¥–µ–¥–ª–∞–π–Ω –Ω–∞ —Ä–∞–±–æ—Ç–µ",
    "selected_option": "–°–ø–æ–∫–æ–π–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π...",
    "rewards": {
      "experience_gained": 25,
      "stress_change": -5,
      "energy_cost": 10
    },
    "player_changes": {
      "old_stress": 50,
      "new_stress": 45,
      "old_energy": 130,
      "new_energy": 120,
      "old_level": 1,
      "new_level": 2,
      "level_up": true
    },
    "cooldown_until": "2024-01-15T16:30:00Z"
  }
}
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è

#### `GET /api/situations/history`
–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π –∏–≥—Ä–æ–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): integer, 1-100, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "history": [
      {
        "situation_title": "–ì–æ—Ä—è—â–∏–π –¥–µ–¥–ª–∞–π–Ω –Ω–∞ —Ä–∞–±–æ—Ç–µ",
        "selected_option": "–°–ø–æ–∫–æ–π–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π...",
        "completed_at": "2024-01-15T14:30:00Z",
        "experience_gained": 25,
        "stress_change": -5,
        "category": "work"
      }
    ],
    "total_completed": 5
  }
}
```

#### `GET /api/situations/recommendations`
–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–∏—Ç—É–∞—Ü–∏–π.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "recommendations": [
      {
        "id": 2,
        "title": "–í–∞–∂–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é",
        "category": "study",
        "difficulty_level": 1,
        "experience_reward": 15
      }
    ],
    "based_on": {
      "stress_level": 45,
      "player_level": 2,
      "completed_situations": 5
    }
  }
}
```

## üéÆ –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

### –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **work** - —Ä–∞–±–æ—á–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ (–¥–µ–¥–ª–∞–π–Ω—ã, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã)
- **study** - —É—á–µ–±–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ (—ç–∫–∑–∞–º–µ–Ω—ã, –ø—Ä–æ–µ–∫—Ç—ã)  
- **personal** - –ª–∏—á–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, —Å–µ–º—å—è)
- **health** - –∑–¥–æ—Ä–æ–≤—å–µ (—Å—Ç—Ä–µ—Å—Å, —Å–æ–Ω, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è)

### –°–∏—Å—Ç–µ–º–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **–£—Ä–æ–≤–µ–Ω—å 1-2**: –ë–∞–∑–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤
- **–£—Ä–æ–≤–µ–Ω—å 3-4**: –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å  
- **–£—Ä–æ–≤–µ–Ω—å 5+**: –°–ª–æ–∂–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏

### –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏ (Cooldown)
- **2 —á–∞—Å–∞** –º–µ–∂–¥—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Å–∏—Ç—É–∞—Ü–∏–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∞–º –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–º
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `GAME_SITUATION_COOLDOWN_HOURS`

### –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ** - —É–º–µ–Ω—å—à–∞—é—Ç —Å—Ç—Ä–µ—Å—Å, –¥–∞—é—Ç –±–æ–ª—å—à–µ –æ–ø—ã—Ç–∞
- **–î–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ** - —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å—Ç—Ä–µ—Å—Å, –º–∞–ª–æ –æ–ø—ã—Ç–∞  
- **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ** - –Ω–∏–∑–∫–∞—è —ç–Ω–µ—Ä–≥–æ–∑–∞—Ç—Ä–∞—Ç–∞, —Å—Ä–µ–¥–Ω–∏–π —ç—Ñ—Ñ–µ–∫—Ç

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- –ü—Ä–∏ **–≤—ã—Å–æ–∫–æ–º —Å—Ç—Ä–µ—Å—Å–µ** (>70) - —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏–∏, —Å–Ω–∏–∂–∞—é—â–∏–µ —Å—Ç—Ä–µ—Å—Å
- –ü—Ä–∏ **–Ω–∏–∑–∫–æ–º —Å—Ç—Ä–µ—Å—Å–µ** (<30) - –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
- –ò—Å–∫–ª—é—á–∞—é—Ç—Å—è —É–∂–µ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –∏–≥—Ä–æ–∫–∞

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **SituationController** - HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **SituationService** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **SituationRepository** - –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **situations** - –æ–ø–∏—Å–∞–Ω–∏—è —Å–∏—Ç—É–∞—Ü–∏–π
- **situation_options** - –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π
- **player_situations** - –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–≥—Ä–æ–∫–æ–≤

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –∏–≥—Ä–æ–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Ç—É–∞—Ü–∏—è–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- –°–∏—Å—Ç–µ–º–∞ cooldown –ø—Ä–æ—Ç–∏–≤ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∏—Ç—É–∞—Ü–∏–π
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ activity_logs

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–∏—Ç—É–∞—Ü–∏–π
```bash
curl -X GET http://localhost:8000/api/situations \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏
```bash
curl -X GET http://localhost:8000/api/situations/random?category=work \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏
```bash
curl -X POST http://localhost:8000/api/situations/1/complete \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"option_id": 1}'
```

### –ò—Å—Ç–æ—Ä–∏—è —Å–∏—Ç—É–∞—Ü–∏–π
```bash
curl -X GET http://localhost:8000/api/situations/history \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## üìä –ë–∞–∑–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ (8 —à—Ç—É–∫)

–°–æ–∑–¥–∞–Ω—ã —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö:

1. **–ì–æ—Ä—è—â–∏–π –¥–µ–¥–ª–∞–π–Ω –Ω–∞ —Ä–∞–±–æ—Ç–µ** (work, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 2)
2. **–í–∞–∂–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é** (study, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 1)  
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –¥—Ä—É–≥–æ–º** (personal, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 2)
4. **–ë–µ—Å—Å–æ–Ω–Ω–∞—è –Ω–æ—á—å** (health, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 1)
5. **–ü—É–±–ª–∏—á–Ω–æ–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ** (work, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 3, —Ç—Ä–µ–±—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å 2)
6. **–°–µ–º–µ–π–Ω—ã–µ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è** (personal, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 3, —Ç—Ä–µ–±—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å 2)
7. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π** (health, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 2)
8. **–°–ª–æ–∂–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ** (study, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 3, —Ç—Ä–µ–±—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å 2)

–ö–∞–∂–¥–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –∏–º–µ–µ—Ç 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏ –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞.

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ
